<div [ngClass]="{'loading':true ,'loading-visible': cargando != 0 }">
    <div class="loader-container">
        <i class="now-ui-icons loader_refresh spin"></i> 
    </div>
</div>

<div class="panel-header panel-header-sm">
</div>
<div class="main-content">
  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h5 class="title">
            <i _ngcontent-c25="" class="now-ui-icons arrows-1_minimal-left pr-3" (click)="regresaObra();"></i>
            Empresa: {{this.empresaForm.getRawValue().razonSocial}}
          </h5>
        </div>
        <div class="card-body">
          <form (ngSubmit)="onSubmit()"  [formGroup]=empresaForm #formDir="ngForm" > <!-- INICIO DEL FORM -->
            <div class="row"> <!-- INICIO PRIMER ROW -->
              <div class="col-md-6 col-12"> <!-- INICIO PRIMER CAMPO -->
                <div class="form-group">
                  <label for="id_empresa">Ctrl</label>
                  <input type="text" id="id_empresa"  name="id_empresa" class="form-control" placeholder="ID" formControlName="id_empresa">
                  <div *ngIf="id_empresa.invalid && (id_empresa.dirty || id_empresa.touched)" class="alert alert-danger">            
                    <div *ngIf="id_empresa.errors.required">
                      Ctrl Requerido.
                    </div>
                  </div>
                </div>
              </div><!-- FIN PRIMER CAMPO -->
              <div class="col-md-6 col-12"> <!-- INICIO SEGUNDO CAMPO -->
                <div class="form-group">
                  <label for="rfc">RFC</label>
                  <input type="text" id="rfc"  required name="rfc" class="form-control" placeholder="RFC" formControlName="rfc">
                  <div *ngIf="rfc.invalid && (rfc.dirty || rfc.touched)" class="alert alert-danger">    
                    <div *ngIf="rfc.errors.required">
                      RFC requerido.
                    </div>
                    <div *ngIf="rfc.errors.pattern">
                      Formato de RFC incorrecto
                    </div>
                  </div>
                </div>
              </div> <!-- FIN SEGUNDO CAMPO -->  
            </div> <!-- FIN PRIMER ROW -->
            <div class="row"> <!-- INICIO SEGUNDO ROW -->
              <div class="col-md-12 col-12"> <!-- INICIO SEGUNDO CAMPO -->
                <div class="form-group">
                  <label for="nombre">Nombre</label>
                  <input type="text" id="nombre"  required name="nombre" class="form-control" placeholder="Nombre" formControlName="nombre">
                  <div *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)" class="alert alert-danger">    
                    <div *ngIf="nombre.errors.required">
                      Nombre requerido.
                    </div>
                  </div>
                </div>
              </div> <!-- FIN SEGUNDO CAMPO -->  
            </div> <!-- FIN PRIMER ROW -->
            <div class="row"> <!-- INICIO SEGUNDO ROW -->
              <div class="col-md-6 col-12"> <!-- INICIO TERCER CAMPO -->
                <div class="form-group">
                  <label for="razonSocial">Raz&oacute;n Social</label>
                  <input type="text" id="razonSocial"  required   name="razonSocial" class="form-control" placeholder="Raz&oacute;n Social"  formControlName="razonSocial" >
                  <div *ngIf="razonSocial.invalid && (razonSocial.dirty || razonSocial.touched)"class="alert alert-danger">            
                    <div *ngIf="razonSocial.errors.required">
                      Raz&oacute;n Social requerido.
                    </div>
                  </div>
                </div>
              </div><!-- FIN TERCER CAMPO -->
              <div class="col-md-6 col-12"> <!-- INICIO OCTAVO CAMPO -->
                <div class="form-group">
                  <label for="calle">Calle</label> <!--tipo de credencial referido al catalogo de clientes.-->
                  <input type="text" id="calle"  required   name="calle" class="form-control" placeholder="Calle"  formControlName="calle" >
                  <div *ngIf="calle.invalid && (calle.dirty || calle.touched)" class="alert alert-danger">            
                    <div *ngIf="calle.errors.required">
                      Calle requerida.
                    </div>
                  </div>
                </div>
              </div> <!-- FIN OCTAVO CAMPO -->
            </div><!-- FIN SEGUNDO ROW -->
            <div class="row"> <!-- INICIO TERCER ROW -->
              <div class="col-md-6 col-12"> <!-- INICIO CUARTO CAMPO -->
                <div class="form-group">
                  <label for="noExt">N&uacute;mero exterior</label> 
                  <input type="text" id="noExt"  required   class="form-control" placeholder="N&uacute;mero exterior"  formControlName="noExt" >
                  <div *ngIf="noExt.invalid && (noExt.dirty || noExt.touched)" class="alert alert-danger">            
                    <div *ngIf="noExt.errors.required">
                      N&uacute;mero exterior requerido.
                    </div>
                  </div>
                </div>
              </div> <!-- FIN CUARTO CAMPO -->
              <div class="col-md-6 col-12"> <!-- INICIO QUINTO CAMPO -->
                <div class="form-group">
                  <label for="noInt">N&uacute;mero interior</label> 
                  <input type="text" id="noInt"    class="form-control" placeholder="N&uacute;mero interior"  formControlName="noInt" >
                </div>
              </div><!-- FIN QUINTO CAMPO -->
            </div> <!-- FIN TERCER ROW -->
            <div class="row"> <!-- INICIO CUARTO ROW -->
              <div class="col-md-6 col-12"> <!-- INICIO CUARTO CAMPO -->
                <div class="form-group">
                  <label for="col">Colonia</label> 
                  <input type="text" id="col"  required   class="form-control" placeholder="Colonia"  formControlName="col" >
                  <div *ngIf="col.invalid && (col.dirty || col.touched)" class="alert alert-danger">            
                    <div *ngIf="col.errors.required">
                      Colonia requerida.
                    </div>
                  </div>
                </div>
              </div> <!-- FIN CUARTO CAMPO -->
              <div class="col-md-6 col-12"> <!-- INICIO NOVENO CAMPO -->
                <div class="form-group">
                  <label for="municipio">Municipio</label>
                  <input type="text" id="municipio"  required  name="municipio" class="form-control" placeholder="Municipio" formControlName="municipio">
                  <div *ngIf="municipio.invalid && (municipio.dirty || municipio.touched)" class="alert alert-danger">            
                    <div *ngIf="municipio.errors.required"> Revenimiento requerido.</div>
                  </div>
                </div>
              </div><!-- FIN NOVENO CAMPO -->  
            </div> <!-- FIN CUARTO ROW -->
            <div class="row"> <!-- INICIO SEXTO ROW -->
              <div class="col-md-6 col-12"> <!-- INICIO DECIMO CAMPO -->
                <div class="form-group">
                  <label for="estado">Estado</label>
                  <input type="text" id="estado" required name="estado" class="form-control" placeholder="Estado" formControlName="estado">
                  <div *ngIf="estado.invalid && (estado.dirty || estado.touched)" class="alert alert-danger">            
                    <div *ngIf="estado.errors.required">Estado requerido.</div>
                  </div>
                </div>
              </div><!-- FIN DECIMO CAMPO --> 
              <div class="col-md-6 col-12"> <!-- INICIO SEXTO CAMPO -->
                <div class="form-group">
                  <label for="email">Email</label>
                  <input type="text"  id="email" required   placeholder="Email"  class="form-control" formControlName="email">
                  <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">            
                    <div *ngIf="email.errors.required">
                      Email requerido.
                    </div>
                    <div *ngIf="email.errors.pattern">
                      Formato incorrecto para un correo electr&oacute;nico.
                    </div>
                  </div>
                </div>
              </div> <!-- FIN SEXTO CAMPO -->
            </div> <!-- FIN SEXTO ROW -->
            <div class="row"> <!-- INICIO CUARTO ROW -->
              <div class="col-md-6 col-12"> <!-- INICIO SEXTO CAMPO -->
                <div class="form-group">
                  <label for="telefonoDeContacto">Tel&eacute;fono de contacto</label>
                  <input type="text"  id="telefonoDeContacto" required    class="form-control" placeholder="Telefono de contacto" formControlName="telefonoDeContacto">
                  <div *ngIf="telefonoDeContacto.invalid && (telefonoDeContacto.dirty || telefonoDeContacto.touched)" class="alert alert-danger">            
                    <div *ngIf="telefonoDeContacto.errors.required">
                      Tel&eacute;fono de contacto requerido.
                    </div>
                    <div *ngIf="telefonoDeContacto.errors.pattern">
                      Este es un campo num&eacute;rico
                    </div>
                  </div>
                </div>
              </div> <!-- FIN SEXTO CAMPO -->
              <div class="col-md-6 col-12"> <!-- INICIO SEXTO CAMPO -->
                <div class="form-group">
                  <label for="registroPatronal">Registro patronal</label>
                  <input type="text"  id="registroPatronal"    name="registroPatronal"  placeholder="Registro patronal" class="form-control" formControlName="registroPatronal">
                </div>
              </div> <!-- FIN SEXTO CAMPO -->
            </div> <!-- FIN CUARTO ROW -->
            <div class="row"> 
              <div class="col-md-12 col-12">
                  <p style="color: orange">{{cargandoMessage}}<p>
                  <p style="color: green">{{actualizarMessageCargando}}<p>
              </div>
            </div>

            <div class="btn-group"  style="float: right; padding-right: 10%;">
              <button class="btn btn-info" *ngIf="hidden == true"  (click)="mostrar()">
                <span><b> Cambiar Datos. </b></span>
              </button>
              <button class="btn btn-success" *ngIf="!hidden" [disabled]="empresaForm.invalid" (click)="actualizarObra();">
                <span><b> Guardar Cambios. </b></span>
              </button>
            </div>
          </form> <!-- FIN DEL FORM -->
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card card-user">
        <div class="image">
          <img src="../assets/img/Labo.jpg" alt="...">
        </div>
        <div class="card-body">
          <div class="author">
            <img class="avatar border-gray" src="{{this.imgUrl}}"  alt="...">
            <h5 class="title">{{this.empresaForm.getRawValue().razonSocial}}</h5>
            <p class="description">
              {{this.empresaForm.getRawValue().rfc}}
            </p>
            <div class="btn-group">
              <button class="btn btn-success"  *ngIf="!active"  (click)="toogleActive();">
                <span><b>Activar</b></span>
              </button>
               <button class="btn btn-danger"  *ngIf="active"  (click)="toogleActive();">
                <span><b>Desactivar</b></span>
              </button>
            </div>
          </div>
        </div>
        <hr>
        <div class="button-container">
          <div class="font-icon-detail">
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
